var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function i(e){return e instanceof Array}function a(e){return"function"==typeof e}function o(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:o(e,t)),e}function l(e,t,n){var r=o(t,n);return t!==r&&e&&(e.children=r),r}function f(e,t,n){var r=l(null,u(e,t));return r.dom||(r.dom=n.firstChild,"<"===r.tag&&(r.domLength=n.childNodes.length)),r}function d(e,t,n){var r=e[t],i=o(r,n);return r!==i&&(e[t]=i),i}function s(e,t,r){return a(t)&&(t=t(r),t===n&&(t=r),e.children=t),t}function u(e,t){return 1===t?e[0]:e}function c(e,t,n){var r,i=t.dom,a=t.domLength||1,o=n&&n.dom;if(i!==o)for(;a--;)r=a>0?i.nextSibling:null,o?e.insertBefore(i,o):e.appendChild(i),i=r}function v(){return ee.createTextNode("")}function h(e,t,n){if(e.insertAdjacentHTML){var r,i,a;if(Y||Z){var o="beforebegin"===t?e.previousSibling:"beforeend"===t?e.lastChild:null;o&&3===o.nodeType&&(r=o,Z&&0===o.length&&(a=!0,o.nodeValue=" "),Y&&(i=o.length))}e.insertAdjacentHTML(t,n),r&&(Y&&r.length!==i&&r.splitText(i),Z&&a&&(r.nodeValue=""))}else if(fe.innerHTML=n,"beforebegin"===t)for(var l=e.parentNode;fe.firstChild;)l.insertBefore(fe.firstChild,e);else if("beforeend"===t)for(;fe.firstChild;)e.appendChild(fe.firstChild)}function g(e,t,n,r){if(n){var i=n.dom;if(r){var a=n.domLength||1;1===a?(G(n),e.replaceChild(t,i)):(e.insertBefore(t,i),O(e,n))}else e.insertBefore(t,i)}else e.appendChild(t)}function m(e,t,r,i,a,o){if(le)return b(e,t,i,a);var l,f=e.tag,d=e.children;switch(f){case n:return w(e,d,t,r,i,a);case"#":if(o)return void B(t,d);l=ee.createTextNode(d);break;case"!":l=ee.createComment(d);break;case"<":if(d){if(o)t.innerHTML=d;else{var s=t.childNodes,u=s.length;if(i){var c=i.dom,m=c.previousSibling;h(c,"beforebegin",d),l=m?m.nextSibling:t.firstChild}else h(t,"beforeend",d),l=s[u];e.dom=l,e.domLength=s.length-u,a&&i&&O(t,i)}return}l=v();break;default:var x;switch(f){case"svg":x="http://www.w3.org/2000/svg";break;case"math":x="http://www.w3.org/1998/Math/MathML";break;default:x=r}var C=e.attrs,y=C&&C.is;x?(e.ns=x,l=y?ee.createElementNS(x,f,y):ee.createElementNS(x,f)):l=y?ee.createElement(f,y):ee.createElement(f),e.dom=l,le&&t&&g(t,l,i,a),"string"==typeof d?B(l,d,!1):H(l,e,x,d,!1),C&&N(l,f,x,C);var k=e.events;k&&M(l,e,k),!le&&t&&g(t,l,i,a);var L=k&&k.$created;return void(L&&p(L,"$created",l,e))}e.dom=l,t&&g(t,l,i,a)}function p(e,t,n,r,a,o){var l={type:t,target:n,virtualNode:r};if(a&&(l[a]=o),i(e)){for(var f=0;f<e.length;f++)if(e[f].call(n,l)===!1)return}else e.call(n,l)}function b(e,t,n,r){var i,a=x(e);if(t){var o;n||t.hasChildNodes()?(n?(o=n.dom.previousSibling,h(n.dom,"beforebegin",a),r&&O(t,n)):(o=t.lastChild,h(t,"beforeend",a)),i=o?o.nextSibling:t.firstChild):(t.innerHTML=a,i=t.firstChild)}else fe.innerHTML=a,i=fe.removeChild(fe.firstChild);C(i,e)}function x(e,t){var i=e.tag,a=e.children;switch(i){case"#":return k(a)+he;case"!":return"<!--"+L(a)+"-->";case"<":return a+he;default:var o;if(i){var f=e.attrs;if("select"===i&&f?t={selectedIndex:f.selectedIndex,value:f.value,optionIndex:0}:"option"===i&&t&&((t.value&&t.value===f.value||t.selectedIndex!==n&&t.selectedIndex===t.optionIndex)&&(f.selected=!0),t.optionIndex++),o="<"+i,f){o+=" ";for(var c in f){var v=f[c];if(v!==!1&&("select"!==i||"value"!==c&&"selectedIndex"!==c))if("textarea"!==i||"value"!==c){if(v===!0)v="";else if("style"===c&&!r(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}o+=" "+T(c,v)}else a=v}}}else o="";i&&(o+=">"),a=s(e,a);var m=I(a);if(m>1)for(var p=0,b=a.length;b>p;p++)o+=x(d(a,p),t);else if(0!==m){var C=u(a,m);r(C)?(o+=k(C),i&&C||(o+=he)):o+=x(l(e,C),t)}else i||(o+=he);return i&&(o+="</"+i+">"),o}}function C(e,t){var n=t.tag;if(n){t.dom=e;var i,a;switch(n){case"#":i=e.nodeValue,a=i.indexOf(he),-1!==a&&(a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a));break;case"!":break;case"<":for(var o,l=0;e;e=e.nextSibling)if(l++,3===e.nodeType){if(i=e.nodeValue,l>1&&i===he){o=e.nextSibling,e.parentNode.removeChild(e),l--;break}if(a=i.indexOf(he),-1!==a){a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a),o=e.nextSibling;break}}return t.domLength=l,o;default:var f=t.children,d=I(f);if(d>1){f=t.children;for(var s=e.firstChild,c=0,v=f.length;v>c;c++)s=C(s,f[c])}else if(0!==d){var h=u(f,d);r(h)?h||(e.firstChild.nodeValue=""):C(e.firstChild,h)}var g=t.events;if(g){M(e,t,g);var m=g.$created;m&&p(m,"$created",e,t)}}return e.nextSibling}return y(e,t)}function y(e,t){var n,r=t.children,i=I(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",t.dom=e,n=e.nextSibling;else{if(i>1){n=e;for(var a=0;a<r.length;a++)n=C(n,r[a]);e=r[0].dom}else{var o=l(t,u(r,i));n=C(e,o),e=o.dom}t.dom=e;for(var f=0;e!==n;)f++,e=e.nextSibling;t.domLength=f}return n}function k(e){return e=""+e,ae?(fe.innerText=e,e=fe.innerHTML):e=oe?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function L(e){return e=""+e,e.replace(/-{2,}/g,"-")}function T(e,t){var n=typeof t;return t=""+t,"number"!==n&&(t=oe?t.split("&").join("&amp;").split('"').join("&quot;"):t.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+t+'"'}function w(e,t,n,r,i,a){t=s(e,t);var o,f,c,h=I(t);if(r&&(e.ns=r),0===h)o=v(),g(n,o,i,a);else if(h>1){f=0;for(var p=0,b=t.length;b>p;p++)c=d(t,p),m(c,n,r,i,!1),f+=c.domLength||1;o=t[0].dom,a&&O(n,i)}else c=l(e,u(t,h)),m(c,n,r,i,a),o=c.dom,f=c.domLength;e.dom=o,e.domLength=f}function N(e,t,r,i,a,o){var l,f;if(i)for(f in i){var d=!1,s=i[f];if("style"===f){var u=a&&a[f];u!==s&&(d=S(e,u,i,s))}else V(t,f)?e[f]!==s&&(e[f]=s,d=!0):a&&a[f]===s||("class"!==f||r?E(e,f,s):e.className=s,d=!0);d&&o&&(l||(l=[])).push(f)}if(a)for(f in a)i&&i[f]!==n||("class"!==f||r?V(t,f)||e.removeAttribute(f):e.className="",o&&(l||(l=[])).push(f));return l}function E(e,t,n){if(n===!1)e.removeAttribute(t);else{n===!0&&(n="");var r,i=t.indexOf(":");if(-1!==i){var a=t.substr(0,i);switch(a){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}function S(e,t,i,a){var o,l=!1;if(!r(a)&&(!ce||!t||r(t))){var f="";if(a)for(o in a)f+=o+": "+a[o]+"; ";a=f,ce||(i.style=a)}var d=e.style;if(r(a))d.cssText=a,l=!0;else{if(a)for(o in a){var s=a[o];if(!t||t[o]!==s){var u=s.indexOf("!important");if(-1!==u)d.setProperty(o,s.substr(0,u),"important");else{if(t){var c=t[o];c&&-1!==c.indexOf("!important")&&d.removeProperty(o)}d.setProperty(o,s,"")}l=!0}}if(t)for(o in t)a&&a[o]!==n||(d.removeProperty(o),l=!0)}return l}function M(e,t,n,r){var i;if(n){e.virtualNode=t;for(i in n)r&&r[i]||A(e,i)}if(r)for(i in r)n&&n[i]||j(e,i)}function V(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"value"===t||"selectedIndex"===t;case"option":return"selected"===t}}function A(e,t){if("$"!==t[0])if(se)e.addEventListener(t,q,!1);else{var n="on"+t;n in e?e[n]=q:e.attachEvent(n,q)}}function j(e,t){if("$"!==t[0])if(se)e.removeEventListener(t,q,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,q)}}function H(e,t,n,i,a){i=s(t,i);var o=I(i);if(o>1)for(var f=0,c=i.length;c>f;f++)m(d(i,f),e,n);else if(0!==o){var v=u(i,o);!a&&r(v)?B(e,v):(v=l(t,v),m(v,e,n,null,!1,!a))}}function I(e){return i(e)?e.length:e||r(e)?-1:0}function P(e,t,n){n>1?$(e,t,0,t.length):0!==n&&(r(t)?e.removeChild(e.firstChild):O(e,f(t,n,e)))}function $(e,t,n,r){for(;r>n;n++)O(e,t[n])}function O(e,t){G(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function B(e,t,n){if(t)de?e.textContent=t:e.innerText=t;else{if(n)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(v())}}function D(e,t,n,i,a,o,v){if(a=s(t,a,i),a!==i){var h=I(i);if(0===h)return void H(e,t,n,a,!1);var g,p,b=I(a);if(0===b)return void P(e,i,h);if(2>b){if(p=u(a,b),!o&&r(p)){if(b===h){if(g=u(i,h),p===g)return;if(r(g))return void(e.firstChild.nodeValue=p)}return J(i,h),void B(e,p,!0)}if(2>h)return g=f(i,h,e),p=l(t,p,g),void _(g,p,e,n,null,0,v,!o)}-1===b&&(t.children=a=[a]),2>h&&(g=f(i,h,e),1===h?i[0]=g:i=[g]);var x,C=i.length,y=a.length,k=C-1,L=a.length-1,T=0,w=0,N=!0;e:for(;N&&k>=T&&L>=w;){N=!1;var E,S,M,V;for(E=i[T],M=d(a,w,E);E.key===M.key;){if(_(E,M,e,n,i,T+1,v),T++,w++,T>k||w>L)break e;E=i[T],M=d(a,w,E),N=!0}for(S=i[k],V=d(a,L);S.key===V.key;){if(_(S,V,e,n,a,L+1,v),k--,L--,T>k||w>L)break e;S=i[k],V=d(a,L),N=!0}for(;E.key===V.key;){if(x=y>L+1?a[L+1]:v,_(E,V,e,n,null,0,x),c(e,V,x),T++,L--,T>k||w>L)break e;E=i[T],V=d(a,L),N=!0}for(;S.key===M.key;){if(x=C>T?i[T]:v,_(S,M,e,n,null,0,x),c(e,M,x),k--,w++,T>k||w>L)break e;S=i[k],M=d(a,w),N=!0}}if(T>k)for(x=y>L+1?d(a,L+1):v,A=w;L>=A;A++)m(d(a,A),e,n,x);else if(w>L)$(e,i,T,k+1);else{var A,j=i[k+1],D={};for(A=k;A>=T;A--)g=i[A],g.next=j,D[g.key]=g,j=g;for(x=y>L+1?d(a,L+1):v,A=L;A>=w;A--){p=a[A];var q=p.key;g=D[q],g?(D[q]=null,j=g.next,_(g,p,e,n,null,0,x),e.nextSibling!=(x&&x.dom)&&c(e,p,x)):m(p,e,n,x),x=p}for(A=T;k>=A;A++)g=i[A],null!==D[g.key]&&O(e,g)}}}function q(e){e=W(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(i(n)){for(var r=0,a=n.length;a>r;r++)if(X(n[r],t,e),ge){ge=!1;break}}else X(n,t,e)}function R(){this.defaultPrevented=!0,this.returnValue=!1}function F(){this.cancelBubble=!0}function K(){ge=!0,this.stopPropagation()}function W(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=R,e.stopPropagation=F,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=K,e}function X(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){re.error(r.stack||r)}}function _(e,t,r,i,a,o,l,f){if(t!==e){var d=t.tag;if(e.tag!==d)m(t,r,i,e,!0);else{var s=e.dom,u=e.children,c=t.children;switch(d){case n:var v=a&&o<a.length?a[o]:l;z(e,u,t,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),t.dom=s;break;case"<":u!==c?m(t,r,null,e,!0,f):(t.dom=e.dom,t.domLength=e.domLength);break;default:var h=t.attrs,g=e.attrs;if((h&&h.is)!==(g&&g.is))return void m(t,r,i,e,!0);var b=e.ns;b&&(t.ns=b),t.dom=s,c!==u&&D(s,t,b,u,c,!1);var x=t.events,C=e.events;if(h!==g){var y=x&&x.$changed,k=N(s,d,b,h,g,!!y);k&&p(y,"$changed",s,t,"changes",k)}x!==C&&M(s,t,x,C)}}}}function z(e,t,n,r,a,o,l){if(r=s(n,r,t),r!==t){var f,d,u=I(r),c=I(t);if(o&&(n.ns=o),0===u)0===c?f=e.dom:(P(a,t,c),f=v(),g(a,f,l));else{if(0===c)return a.removeChild(e.dom),void w(n,r,a,o,l);if(D(a,n,o,t,r,!0,l),r=n.children,i(r)){f=r[0].dom,d=0;for(var h=0,m=r.length;m>h;h++)d+=r[h].domLength||1}else f=r.dom,d=r.domLength}n.dom=f,n.domLength=d}}function G(e){if(!r(e)){var t=e.dom;if(t){var i=e.events;if(i){for(var a in i)j(t,a);var o=i.$destroyed;o&&p(o,"$destroyed",t,e)}t.virtualNode&&(t.virtualNode=n)}var l=e.children;l&&J(l,I(l))}}function J(e,t){if(t>1)for(var n=0,r=e.length;r>n;n++)G(e[n]);else 0!==t&&G(u(e,t))}function Q(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}function U(e){e&&e!=ee.body&&e!=ee.activeElement&&e.focus()}var Y,Z,ee=t.document,te=t.navigator,ne=function(){},re=t.console||{warn:ne,error:ne},ie=te.userAgent,ae=-1!==ie.indexOf("WebKit"),oe=-1!==ie.indexOf("Firefox"),le=-1!==ie.indexOf("Trident"),fe=ee.createElement("div"),de="textContent"in ee,se="addEventListener"in ee,ue="createRange"in ee,ce="setProperty"in fe.style,ve=ee.createElement("p");ve.insertAdjacentHTML&&(ve.appendChild(ee.createTextNode("a")),ve.insertAdjacentHTML("beforeend","b"),Y=1===ve.childNodes.length,ve=ee.createElement("p"),ve.appendChild(v()),ve.insertAdjacentHTML("beforeend","<b>"),Z=3!==ve.firstChild.nodeType);var he="",ge=(ue?ee.createRange():null,!1),me=(e.vdom={create:function(e){return e=o(e),m(e),e},append:function(e,t){return t=o(t),m(t,e),t},update:function(e,t){var n=ee.activeElement;return t=o(t,e),_(e,t,e.dom.parentNode),Q(t,e),U(n),e},updateChildren:function(e,t){var n=ee.activeElement,r=e.children;r!==t&&D(e.dom,e,e.ns,r,t,!e.tag),U(n)},remove:function(e){var t=e.dom.parentNode;O(t,e)}},ee.TEXT_NODE);e.dom2cito=function pe(e){if(e.nodeType==me){var t=e.textContent;return t.match(/\S/)?t:void 0}for(var n={tag:e.nodeName.toLowerCase(),attrs:{},children:[]},r=n.attrs,i=e.attributes,a=i.length,o=0;a>o;o++){var l=i[o];r[l.name]=l.value}for(var f=n.children,d=e.childNodes,s=e.childNodes.length,u=0;s>u;u++){var c=pe(d[u]);c&&f.push(c)}return n}}(cito,window);