var cito=window.cito||{};!function(e,t,n){"use strict";function r(e){return"string"==typeof e}function a(e){return e instanceof Array}function o(e){return"function"==typeof e}function l(e,t){var r=typeof e;return"string"===r?e={tag:"#",children:e}:"function"===r&&(e=e(t),e=e===n?t:l(e,t)),e}function f(e,t,n){var r=l(t,n);return t!==r&&e&&(e.children=r),r}function d(e,t,n){var r=f(null,c(e,t));return r.dom||(r.dom=n.firstChild,"<"===r.tag&&(r.domLength=n.childNodes.length)),r}function s(e,t,n){var r=e[t],i=l(r,n);return r!==i&&(e[t]=i),i}function u(e,t,r){return o(t)&&(t=t(r),t===n&&(t=r),e.children=t),t}function c(e,t){return 1===t?e[0]:e}function v(e,t,n){var r,i=t.dom,a=t.domLength||1,o=n&&n.dom;if(i!==o)for(;a--;)r=a>0?i.nextSibling:null,o?e.insertBefore(i,o):e.appendChild(i),i=r}function h(){return te.createTextNode("")}function g(e,t,n){if(e.insertAdjacentHTML){var r,i,a;if(Z||ee){var o="beforebegin"===t?e.previousSibling:"beforeend"===t?e.lastChild:null;o&&3===o.nodeType&&(r=o,ee&&0===o.length&&(a=!0,o.nodeValue=" "),Z&&(i=o.length))}e.insertAdjacentHTML(t,n),r&&(Z&&r.length!==i&&r.splitText(i),ee&&a&&(r.nodeValue=""))}else if(de.innerHTML=n,"beforebegin"===t)for(var l=e.parentNode;de.firstChild;)l.insertBefore(de.firstChild,e);else if("beforeend"===t)for(;de.firstChild;)e.appendChild(de.firstChild)}function m(e,t,n,r){if(n){var i=n.dom;if(r){var a=n.domLength||1;1===a?(J(n),e.replaceChild(t,i)):(e.insertBefore(t,i),B(e,n))}else e.insertBefore(t,i)}else e.appendChild(t)}function p(e,t,r,i,a,o){if(fe)return x(e,t,i,a);var l,f=e.tag,d=e.children;switch(f){case n:return N(e,d,t,r,i,a);case"#":if(o)return void D(t,d);l=te.createTextNode(d);break;case"!":l=te.createComment(d);break;case"<":if(d){if(o)t.innerHTML=d;else{var s=t.childNodes,u=s.length;if(i){var c=i.dom,v=c.previousSibling;g(c,"beforebegin",d),l=v?v.nextSibling:t.firstChild}else g(t,"beforeend",d),l=s[u];e.dom=l,e.domLength=s.length-u,a&&i&&B(t,i)}return}l=h();break;default:var p;switch(f){case"svg":p="http://www.w3.org/2000/svg";break;case"math":p="http://www.w3.org/1998/Math/MathML";break;default:p=r}var C=e.attrs,y=C&&C.is;p?(e.ns=p,l=y?te.createElementNS(p,f,y):te.createElementNS(p,f)):l=y?te.createElement(f,y):te.createElement(f),e.dom=l,fe&&t&&m(t,l,i,a),"string"==typeof d?D(l,d,!1):I(l,e,p,d,!1),C&&E(l,f,p,C);var k=e.events;k&&V(l,e,k),!fe&&t&&m(t,l,i,a);var L=k&&k.$created;return void(L&&b(L,"$created",l,e))}e.dom=l,t&&m(t,l,i,a)}function b(e,t,n,r,i,o){var l={type:t,target:n,virtualNode:r};if(i&&(l[i]=o),a(e)){for(var f=0;f<e.length;f++)if(e[f].call(n,l)===!1)return}else e.call(n,l)}function x(e,t,n,r){var i,a=C(e);if(t){var o;n||t.hasChildNodes()?(n?(o=n.dom.previousSibling,g(n.dom,"beforebegin",a),r&&B(t,n)):(o=t.lastChild,g(t,"beforeend",a)),i=o?o.nextSibling:t.firstChild):(t.innerHTML=a,i=t.firstChild)}else de.innerHTML=a,i=de.removeChild(de.firstChild);y(i,e)}function C(e,t){var i=e.tag,a=e.children;switch(i){case"#":return L(a)+ge;case"!":return"<!--"+T(a)+"-->";case"<":return a+ge;default:var o;if(i){var l=e.attrs;if("select"===i&&l?t={selectedIndex:l.selectedIndex,value:l.value,optionIndex:0}:"option"===i&&t&&((t.value&&t.value===l.value||t.selectedIndex!==n&&t.selectedIndex===t.optionIndex)&&(l.selected=!0),t.optionIndex++),o="<"+i,l){o+=" ";for(var d in l){var v=l[d];if(v!==!1&&("select"!==i||"value"!==d&&"selectedIndex"!==d))if("textarea"!==i||"value"!==d){if(v===!0)v="";else if("style"===d&&!r(v)){var h="";for(var g in v)h+=g+": "+v[g]+"; ";v=h}o+=" "+w(d,v)}else a=v}}}else o="";i&&(o+=">"),a=u(e,a);var m=P(a);if(m>1)for(var p=0,b=a.length;b>p;p++)o+=C(s(a,p),t);else if(0!==m){var x=c(a,m);r(x)?(o+=L(x),i&&x||(o+=ge)):o+=C(f(e,x),t)}else i||(o+=ge);return i&&(o+="</"+i+">"),o}}function y(e,t){var n=t.tag;if(n){t.dom=e;var i,a;switch(n){case"#":i=e.nodeValue,a=i.indexOf(ge),-1!==a&&(a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a));break;case"!":break;case"<":for(var o,l=0;e;e=e.nextSibling)if(l++,3===e.nodeType){if(i=e.nodeValue,l>1&&i===ge){o=e.nextSibling,e.parentNode.removeChild(e),l--;break}if(a=i.indexOf(ge),-1!==a){a+1<i.length&&e.splitText(a+1),e.nodeValue=i.substr(0,a),o=e.nextSibling;break}}return t.domLength=l,o;default:var f=t.children,d=P(f);if(d>1){f=t.children;for(var s=e.firstChild,u=0,v=f.length;v>u;u++)s=y(s,f[u])}else if(0!==d){var h=c(f,d);r(h)?h||(e.firstChild.nodeValue=""):y(e.firstChild,h)}var g=t.events;if(g){V(e,t,g);var m=g.$created;m&&b(m,"$created",e,t)}}return e.nextSibling}return k(e,t)}function k(e,t){var n,r=t.children,i=P(r);if(0===i)e.length>1&&e.splitText(1),e.nodeValue="",t.dom=e,n=e.nextSibling;else{if(i>1){n=e;for(var a=0;a<r.length;a++)n=y(n,r[a]);e=r[0].dom}else{var o=f(t,c(r,i));n=y(e,o),e=o.dom}t.dom=e;for(var l=0;e!==n;)l++,e=e.nextSibling;t.domLength=l}return n}function L(e){return e=""+e,oe?(de.innerText=e,e=de.innerHTML):e=le?e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;"):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e}function T(e){return e=""+e,e.replace(/-{2,}/g,"-")}function w(e,t){var n=typeof t;return t=""+t,"number"!==n&&(t=le?t.split("&").join("&amp;").split('"').join("&quot;"):t.replace(/&/g,"&amp;").replace(/"/g,"&quot;")),e+'="'+t+'"'}function N(e,t,n,r,i,a){t=u(e,t);var o,l,d,v=P(t);if(r&&(e.ns=r),0===v)o=h(),m(n,o,i,a);else if(v>1){l=0;for(var g=0,b=t.length;b>g;g++)d=s(t,g),p(d,n,r,i,!1),l+=d.domLength||1;o=t[0].dom,a&&B(n,i)}else d=f(e,c(t,v)),p(d,n,r,i,a),o=d.dom,l=d.domLength;e.dom=o,e.domLength=l}function E(e,t,r,i,a,o){var l,f;if(i)for(f in i){var d=!1,s=i[f];if("style"===f){var u=a&&a[f];u!==s&&(d=M(e,u,i,s))}else A(t,f)?e[f]!==s&&(e[f]=s,d=!0):a&&a[f]===s||("class"!==f||r?S(e,f,s):e.className=s,d=!0);d&&o&&(l||(l=[])).push(f)}if(a)for(f in a)i&&i[f]!==n||("class"!==f||r?A(t,f)||e.removeAttribute(f):e.className="",o&&(l||(l=[])).push(f));return l}function S(e,t,n){if(n===!1)e.removeAttribute(t);else{n===!0&&(n="");var r,i=t.indexOf(":");if(-1!==i){var a=t.substr(0,i);switch(a){case"xlink":r="http://www.w3.org/1999/xlink"}}r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}}function M(e,t,i,a){var o,l=!1;if(!r(a)&&(!ve||!t||r(t))){var f="";if(a)for(o in a)f+=o+": "+a[o]+"; ";a=f,ve||(i.style=a)}var d=e.style;if(r(a))d.cssText=a,l=!0;else{if(a)for(o in a){var s=a[o];if(!t||t[o]!==s){var u=s.indexOf("!important");if(-1!==u)d.setProperty(o,s.substr(0,u),"important");else{if(t){var c=t[o];c&&-1!==c.indexOf("!important")&&d.removeProperty(o)}d.setProperty(o,s,"")}l=!0}}if(t)for(o in t)a&&a[o]!==n||(d.removeProperty(o),l=!0)}return l}function V(e,t,n,r){var i;if(n){e.virtualNode=t;for(i in n)r&&r[i]||j(e,i)}if(r)for(i in r)n&&n[i]||H(e,i)}function A(e,t){switch(e){case"input":return"value"===t||"checked"===t;case"textarea":return"value"===t;case"select":return"value"===t||"selectedIndex"===t;case"option":return"selected"===t}}function j(e,t){if("$"!==t[0])if(ue)e.addEventListener(t,R,!1);else{var n="on"+t;n in e?e[n]=R:e.attachEvent(n,R)}}function H(e,t){if("$"!==t[0])if(ue)e.removeEventListener(t,R,!1);else{var n="on"+t;n in e?e[n]=null:e.detachEvent(n,R)}}function I(e,t,n,i,a){i=u(t,i);var o=P(i);if(o>1)for(var l=0,d=i.length;d>l;l++)p(s(i,l),e,n);else if(0!==o){var v=c(i,o);!a&&r(v)?D(e,v):(v=f(t,v),p(v,e,n,null,!1,!a))}}function P(e){return a(e)?e.length:e||r(e)?-1:0}function $(e,t,n){n>1?O(e,t,0,t.length):0!==n&&(r(t)?e.removeChild(e.firstChild):B(e,d(t,n,e)))}function O(e,t,n,r){for(;r>n;n++)B(e,t[n])}function B(e,t){J(t);for(var n,r=t.dom,i=t.domLength||1;i--;)n=i>0?r.nextSibling:null,e.removeChild(r),r=n}function D(e,t,n){if(t)se?e.textContent=t:e.innerText=t;else{if(n)for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(h())}}function q(e,t,n,i,a,o,l){if(a=u(t,a,i),a!==i){var h=P(i);if(0===h)return void I(e,t,n,a,!1);var g,m,b=P(a);if(0===b)return void $(e,i,h);if(2>b){if(m=c(a,b),!o&&r(m)){if(b===h){if(g=c(i,h),m===g)return;if(r(g))return void(e.firstChild.nodeValue=m)}return Q(i,h),void D(e,m,!0)}if(2>h)return g=d(i,h,e),m=f(t,m,g),void z(g,m,e,n,null,0,l,!o)}-1===b&&(t.children=a=[a]),2>h&&(g=d(i,h,e),1===h?i[0]=g:i=[g]);var x,C=i.length,y=a.length,k=C-1,L=a.length-1,T=0,w=0,N=!0;e:for(;N&&k>=T&&L>=w;){N=!1;var E,S,M,V;for(E=i[T],M=s(a,w,E);E.key===M.key;){if(z(E,M,e,n,i,T+1,l),T++,w++,T>k||w>L)break e;E=i[T],M=s(a,w,E),N=!0}for(S=i[k],V=s(a,L);S.key===V.key;){if(z(S,V,e,n,a,L+1,l),k--,L--,T>k||w>L)break e;S=i[k],V=s(a,L),N=!0}for(;E.key===V.key;){if(x=y>L+1?a[L+1]:l,z(E,V,e,n,null,0,x),v(e,V,x),T++,L--,T>k||w>L)break e;E=i[T],V=s(a,L),N=!0}for(;S.key===M.key;){if(x=C>T?i[T]:l,z(S,M,e,n,null,0,x),v(e,M,x),k--,w++,T>k||w>L)break e;S=i[k],M=s(a,w),N=!0}}if(T>k)for(x=y>L+1?s(a,L+1):l,A=w;L>=A;A++)p(s(a,A),e,n,x);else if(w>L)O(e,i,T,k+1);else{var A,j=i[k+1],H={};for(A=k;A>=T;A--)g=i[A],g.next=j,H[g.key]=g,j=g;for(x=y>L+1?s(a,L+1):l,A=L;A>=w;A--){m=a[A];var q=m.key;g=H[q],g?(H[q]=null,j=g.next,z(g,m,e,n,null,0,x),e.nextSibling!=(x&&x.dom)&&v(e,m,x)):p(m,e,n,x),x=m}for(A=T;k>=A;A++)g=i[A],null!==H[g.key]&&B(e,g)}}}function R(e){e=X(e,this);var t=e.currentTarget,n=t.virtualNode.events[e.type];if(a(n)){for(var r=0,i=n.length;i>r;r++)if(_(n[r],t,e),me){me=!1;break}}else _(n,t,e)}function F(){this.defaultPrevented=!0,this.returnValue=!1}function K(){this.cancelBubble=!0}function W(){me=!0,this.stopPropagation()}function X(e,n){return e||(e=t.event,e.preventDefault||(e.preventDefault=F,e.stopPropagation=K,e.defaultPrevented=e.returnValue===!1,e.target=e.srcElement),e.currentTarget=n.nodeType?n:e.target),e.stopImmediatePropagation=W,e}function _(e,t,n){try{e.call(t,n)===!1&&n.preventDefault()}catch(r){ie.error(r.stack||r)}}function z(e,t,r,i,a,o,l,f){if(t!==e){var d=t.tag;if(e.tag!==d)p(t,r,i,e,!0);else{var s=e.dom,u=e.children,c=t.children;switch(d){case n:var v=a&&o<a.length?a[o]:l;G(e,u,t,c,r,i,v);break;case"#":case"!":u!==c&&(s.nodeValue=c),t.dom=s;break;case"<":u!==c?p(t,r,null,e,!0,f):(t.dom=e.dom,t.domLength=e.domLength);break;default:var h=t.attrs,g=e.attrs;if((h&&h.is)!==(g&&g.is))return void p(t,r,i,e,!0);var m=e.ns;m&&(t.ns=m),t.dom=s,c!==u&&q(s,t,m,u,c,!1);var x=t.events,C=e.events;if(h!==g){var y=x&&x.$changed,k=E(s,d,m,h,g,!!y);k&&b(y,"$changed",s,t,"changes",k)}x!==C&&V(s,t,x,C)}}}}function G(e,t,n,r,i,o,l){if(r=u(n,r,t),r!==t){var f,d,s=P(r),c=P(t);if(o&&(n.ns=o),0===s)0===c?f=e.dom:($(i,t,c),f=h(),m(i,f,l));else{if(0===c)return i.removeChild(e.dom),void N(n,r,i,o,l);if(q(i,n,o,t,r,!0,l),r=n.children,a(r)){f=r[0].dom,d=0;for(var v=0,g=r.length;g>v;v++)d+=r[v].domLength||1}else f=r.dom,d=r.domLength}n.dom=f,n.domLength=d}}function J(e){if(!r(e)){var t=e.dom;if(t){var i=e.events;if(i){for(var a in i)H(t,a);var o=i.$destroyed;o&&b(o,"$destroyed",t,e)}t.virtualNode&&(t.virtualNode=n)}var l=e.children;l&&Q(l,P(l))}}function Q(e,t){if(t>1)for(var n=0,r=e.length;r>n;n++)J(e[n]);else 0!==t&&J(c(e,t))}function U(e,t){var r;for(r in e)t[r]=e[r];for(r in t)e[r]===n&&(t[r]=n)}function Y(e){e&&e!=te.body&&e!=te.activeElement&&e.focus()}var Z,ee,te=t.document,ne=t.navigator,re=function(){},ie=t.console||{warn:re,error:re},ae=ne.userAgent,oe=-1!==ae.indexOf("WebKit"),le=-1!==ae.indexOf("Firefox"),fe=-1!==ae.indexOf("Trident"),de=te.createElement("div"),se="textContent"in te,ue="addEventListener"in te,ce="createRange"in te,ve="setProperty"in de.style,he=te.createElement("p");he.insertAdjacentHTML&&(he.appendChild(te.createTextNode("a")),he.insertAdjacentHTML("beforeend","b"),Z=1===he.childNodes.length,he=te.createElement("p"),he.appendChild(h()),he.insertAdjacentHTML("beforeend","<b>"),ee=3!==he.firstChild.nodeType);var ge="",me=(ce?te.createRange():null,!1),pe=(e.vdom={create:function(e){return e=l(e),p(e),e},append:function(e,t){return t=l(t),p(t,e),t},update:function(e,t){var n=te.activeElement;return t=l(t,e),z(e,t,e.dom.parentNode),U(t,e),Y(n),e},updateChildren:function(e,t){var n=te.activeElement,r=e.children;r!==t&&q(e.dom,e,e.ns,r,t,!e.tag),Y(n)},remove:function(e){var t=e.dom.parentNode;B(t,e)}},te.TEXT_NODE);e.dom2cito=function be(e){if(e.nodeType==pe){var t=e.textContent;return t.match(/\S/)?t:void 0}for(var n={tag:e.nodeName.toLowerCase(),attrs:{},children:[]},r=n.attrs,a=e.attributes,o=a.length,l=0;i<o;i++){var f=a[l];r[f.name]=f.value}for(var d=n.children,s=e.childNodes,u=e.childNodes.length,c=0;i<u;i++){var v=be(s[c]);v&&d.push(v)}return n}}(cito,window);